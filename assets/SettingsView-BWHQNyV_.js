import{_ as a,u as e,r as l,c as s,o as n,g as t,a as o,b as u,h as i,i as c,v as r,j as d,k as p,f as v,t as m,F as b,d as f,e as g,l as y}from"./index-D-gZm45R.js";const h={class:"settings-view"},w={class:"settings-card card"},k={class:"form-group"},C={class:"form-group"},x={class:"form-group"},D={class:"form-group"},E={class:"form-label"},V={class:"settings-card card"},_={class:"action-buttons"},j={class:"btn btn-secondary full-width file-input-label"},H={class:"settings-card card"},L={class:"about-info"},U={class:"time-types"},S={class:"type-list"},T={class:"type-name"},A={key:0,class:"install-prompt card"},F=a({__name:"SettingsView",setup(a){const F=e(),I=l({}),M=l(""),O=l("success"),$=l(!1);let q=null;const z=s(()=>Object.values(F.coinTypes)),B=()=>{F.updateSettings(I.value),N("è®¾ç½®å·²ä¿å­˜","success")},G=()=>{F.exportData(),N("æ•°æ®å¯¼å‡ºæˆåŠŸ","success")},J=async a=>{const e=a.target.files[0];if(e)try{await F.importData(e),N("æ•°æ®å¯¼å…¥æˆåŠŸ","success"),a.target.value=""}catch(l){N(l,"error")}},K=()=>{F.clearAllData()&&N("æ‰€æœ‰æ•°æ®å·²æ¸…ç©º","success")},N=(a,e="success")=>{M.value=a,O.value=e,setTimeout(()=>{M.value=""},3e3)},P=a=>{a.preventDefault(),q=a,$.value=!0},Q=async()=>{if(!q)return;q.prompt();const{outcome:a}=await q.userChoice;console.log(`ç”¨æˆ·é€‰æ‹©: ${a}`),q=null,$.value=!1},R=()=>{(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&($.value=!1)};return n(()=>{I.value={...F.settings},window.addEventListener("beforeinstallprompt",P),R(),window.addEventListener("change",R)}),t(()=>{window.removeEventListener("beforeinstallprompt",P),window.removeEventListener("change",R)}),(a,e)=>(g(),o("div",h,[u("div",w,[e[8]||(e[8]=u("h3",null,"åŸºæœ¬è®¾ç½®",-1)),u("div",k,[e[4]||(e[4]=u("label",{class:"form-label"},"å¼€å§‹æ—¶é—´ (å°æ—¶)",-1)),c(u("input",{type:"number",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=a=>I.value.startHour=a),min:"0",max:"23",onChange:B},null,544),[[r,I.value.startHour,void 0,{number:!0}]])]),u("div",C,[e[5]||(e[5]=u("label",{class:"form-label"},"ç»“æŸæ—¶é—´ (å°æ—¶)",-1)),c(u("input",{type:"number",class:"form-input","onUpdate:modelValue":e[1]||(e[1]=a=>I.value.endHour=a),min:"1",max:"24",onChange:B},null,544),[[r,I.value.endHour,void 0,{number:!0}]])]),u("div",x,[e[6]||(e[6]=u("label",{class:"form-label"},"æ¯æšé‡‘å¸æ—¶é•¿ (åˆ†é’Ÿ)",-1)),c(u("input",{type:"number",class:"form-input","onUpdate:modelValue":e[2]||(e[2]=a=>I.value.coinDuration=a),min:"15",max:"60",step:"5",onChange:B},null,544),[[r,I.value.coinDuration,void 0,{number:!0}]])]),u("div",D,[u("label",E,[c(u("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>I.value.reminderEnabled=a),onChange:B},null,544),[[p,I.value.reminderEnabled]]),e[7]||(e[7]=d(" å¯ç”¨æ—¶é—´æé†’ ",-1))])])]),u("div",V,[e[10]||(e[10]=u("h3",null,"æ•°æ®ç®¡ç†",-1)),u("div",_,[u("button",{class:"btn btn-primary full-width",onClick:G}," ğŸ“¥ å¯¼å‡ºæ•°æ® "),u("label",j,[e[9]||(e[9]=d(" ğŸ“¤ å¯¼å…¥æ•°æ® ",-1)),u("input",{type:"file",accept:".json",class:"file-input",onChange:J},null,32)]),u("button",{class:"btn btn-danger full-width",onClick:K}," âš ï¸ æ¸…ç©ºæ‰€æœ‰æ•°æ® ")]),M.value?(g(),o("div",{key:0,class:v(["message",O.value])},m(M.value),3)):i("",!0)]),u("div",H,[e[15]||(e[15]=u("h3",null,"å…³äº",-1)),u("div",L,[e[12]||(e[12]=u("p",null,[u("strong",null,"34é‡‘å¸æ—¶é—´ç®¡ç†ç³»ç»Ÿ")],-1)),e[13]||(e[13]=u("p",{class:"version"},"ç‰ˆæœ¬ 1.0.0",-1)),e[14]||(e[14]=u("div",{class:"about-description"},[u("p",null,"åŸºäºåŠªå°”è‰¾åŠ›Â·é˜¿ä¸åˆ©å­œçš„ã€Šä½ ä¸€å¹´çš„8760å°æ—¶ã€‹ä¸­çš„æ—¶é—´ç®¡ç†æ–¹æ³•ã€‚"),u("p",null,'å°†æ¯å¤©ä»æ—©ä¸Š7ç‚¹åˆ°æ™šä¸Š12ç‚¹çš„17ä¸ªæ¸…é†’å°æ—¶ï¼ŒæŒ‰åŠå°æ—¶ä¸ºå•ä½åˆ’åˆ†ä¸º34ä¸ª"æ—¶é—´é‡‘å¸"ã€‚')],-1)),u("div",U,[e[11]||(e[11]=u("h4",null,"æ—¶é—´ç±»å‹è¯´æ˜ï¼š",-1)),u("ul",S,[(g(!0),o(b,null,f(z.value,a=>(g(),o("li",{key:a.key,class:"type-item"},[u("span",{class:"type-color",style:y({backgroundColor:a.color})},null,4),u("span",T,m(a.name),1)]))),128))])])])]),$.value?(g(),o("div",A,[e[16]||(e[16]=u("h4",null,"ğŸ“± æ·»åŠ åˆ°ä¸»å±å¹•",-1)),e[17]||(e[17]=u("p",null,"å°†æ­¤åº”ç”¨æ·»åŠ åˆ°æ‚¨çš„æ‰‹æœºä¸»å±å¹•ï¼Œè·å¾—æ¥è¿‘åŸç”Ÿåº”ç”¨çš„ä½“éªŒï¼",-1)),u("button",{class:"btn btn-primary",onClick:Q},"ç«‹å³å®‰è£…")])):i("",!0)]))}},[["__scopeId","data-v-c663785f"]]);export{F as default};
